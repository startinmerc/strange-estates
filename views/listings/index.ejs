<%include ../partials/header%>

<div class="container-fluid d-flex align-items-center flex-column justify-content-center" id="header" style="background-image: url('https://source.unsplash.com/whqHBbiC7tY')">
	<div class="text border p-0 p-md-5 text-center rounded">
		<h1 class="display-2">Strange Estates</h1>
		<%if(term){%>
		<p class="mt-3">Search results for "<%=term%>"</p>
		<%} else {%>
		<p class="mt-3">View our full listings below.</p>
		<%}%>
	</div>
</div>
<div class="container">
	<form action="/listings" method="GET" class="form-inline row py-3 justify-content-center">
		<div class="form-group  col-12 col-md-6">
			<label class="sr-only" for="search">Search listings</label>
			<input class="form-control mr-1 w-100" type="text" name="search" 
			id="search" <%if(term){%>value=<%=term%><%} else {%>placeholder="Search listings"<%}%>>
		</div>
		<div class="col-12 col-md-3">
			<input class="btn btn-secondary mt-1 mt-sm-0 w-100" type="submit" name="submit">
		</div>
	</form>

	<div class="card-columns">
		<% foundListings.forEach(function(listing){ %>
				<div class="card index-card text-center border-0">
					<img class="card-img-top" src="<%=listing.image.src%>" alt="<%=listing.image.alt%>">
					<div class="card-body py-1 px-0">
						<h4 class="card-title mb-0"><%= listing.name%></h4>
						<div class="card-text">
							<i class="fa-star fas"></i>
							<i class="fa-star <% if (listing.rating > 1.5) { %> fas <% } else { %> far <% } %>"></i>
							<i class="fa-star <% if (listing.rating > 2.5) { %> fas <% } else { %> far <% } %>"></i>
							<i class="fa-star <% if (listing.rating > 3.5) { %> fas <% } else { %> far <% } %>"></i>
							<i class="fa-star <% if (listing.rating > 4.5) { %> fas <% } else { %> far <% } %>"></i>
						</div>
					</div>
					<div class="card-footer p-0 border-0">
						<p class="mb-0">
							<a href="/listings/<%=listing._id%>" class="btn btn-secondary d-block stretched-link">Details</a> 
						</p>
					</div><!-- card-body -->
				</div><!-- card -->
		<% }); %><!-- forEach-->
	</div><!-- card-columns -->
	
</div><!-- container -->

<%include ../partials/footer%>